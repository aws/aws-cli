Modules:
  Database:
    Source: ./getatt-map-sub-module.yaml
    Properties:
      ConfigMap:
        environment:
          Type: "Production"
          TablePrefix: "prod"
          BillingMode: "PROVISIONED"
          ReadCapacity: 50
          WriteCapacity: 25
        dev:
          Type: "Development"
          TablePrefix: "dev"
          BillingMode: "PAY_PER_REQUEST"
          ReadCapacity: 5
          WriteCapacity: 5
Outputs:
  # Test using Sub with GetAtt on a map parameter
  TableNameWithSub:
    Value: !Sub "The table name is ${Database.TableName}"
  
  # Test direct GetAtt to module output that used map parameter
  EnvironmentType:
    Value: !GetAtt Database.EnvironmentType
  
  # Test using Sub with GetAtt on a map parameter directly
  MapValueInSub:
    Value: !Sub "This is a ${Database.ConfigMap[environment].Type} environment"
